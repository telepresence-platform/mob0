<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <title>Sample_GoogleMap</title>

    <style>
    html { height: 100% }
    body { height: 100% }
    #map { height: 100%; width: 100%}
    </style>
  </head>

  <body>
    <div id="map"></div>

    <script type="text/javascript">
    const AVAILABLE_LOCATIONS = [
      {
        position: { lat: 35.7139014, lng: 139.7601034 },
        title: "大銀杏前",
        url: "https://telepresence-platform.github.io/cocosoco?key=99506149-de1f-4bee-a7d3-b47837e39a53&room=大銀杏前&network=sfu",
      },
    ];

    function initMap() {
      const options = {
        zoom: 15,
        center: { lat: 35.7139014, lng: 139.7601034 },
      };
      const map = new google.maps.Map(document.getElementById("map"), options);

      for (const { position, title, url } of AVAILABLE_LOCATIONS) {
        const infowindow = new google.maps.InfoWindow({
          content: `<iframe src="${ url }" allow="microphone; camera"></iframe>`,
        });

        const marker = new google.maps.Marker({
          position: position,
          map: map,
          title: title,
          icon: "pin_leg.png",
        });
        marker.addListener("click", () => {
          infowindow.open(map, marker);
        });
      }
    }
    </script>

    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCvTrE86BJIl6K7VQxyqsgz5hhBIQ5XnCQ&callback=initMap">
    </script>
  </body>
</html>
